<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>-->
    <script src="../static/js/get.js"></script>
    <script src="../static/js/post.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <link rel="stylesheet" href="../static/css/reset.css"/>
    <link rel="stylesheet" href="../static/css/common.css"/>
    <link rel="stylesheet" href="../static/css/main.css"/>


    <title>중고 경매 사이트</title>
    <script>
        $(document).ready(function () {
            listing();
        });

        function listing() {
            $.ajax({
                type: 'GET',
                url: '/movie',  //url 이름 바꿔야함
                data: {},
                success: function (response) {
                    let rows = response['movies']
                    for (let i = 0; i < rows.length; i++) {
                        let title = rows[i]['title']
                        let image = rows[i]['image']
                        let price = rows[i]['price']
                        // let star = rows[i]['star']
                        let detail = rows[i]['detail']

                        let temp_html = `<div class="col">
                                            <div class="card">
                                                <img onclick="location.href='${detail}'" src="${image}" class="card-img-top" alt="...">
                                                <div class="card-body">
                                                    <a class="card-title" href="${detail}" class="card-title">${title}</a>
                                                    <p class="card-text">${price}</p>
<!--                                                    <p class="card-text">${price}</p>-->
                                                </div>
                                            </div>
                                        </div>`
                        $('#cards-box').append(temp_html)
                    }
                }
            })
        }

        function posting() {
            let url = $('#url').val()
            let star = $('#star').val()
            let comment = $('#comment').val()

            $.ajax({
                type: 'POST',
                url: '/movie',
                data: {url_give: url, star_give: star, comment_give: comment},
                success: function (response) {
                    alert(response['msg'])
                    window.location.reload()
                }
            });
        }

        function open_box() {
            $('#post-box').show()
        }

        function close_box() {
            $('#post-box').hide()
        }
    </script>
</head>
<body>

    <header class="container-fluid">
        <a href="/" class="logo">LOGO</a>
        <nav>
            <a href="#">로그인</a>
            <a href="#">회원가입</a>
        </nav>
    </header>

    <div class="container content-wrap main">
        <div class="content all-items">
            <h1 class="content-title">모든 상품</h1>
            <div class="item-list mt-3">
            <div class="btn-wrap d-flex justify-content-between mb-3">
                <div class="input-group w-auto">
                    <select class="form-select" id="list-filter">
                        <option selected>전체</option>
                        <option value="1">미술품</option>
                        <option value="2">취미생활</option>
                        <option value="3">중고가전</option>
                    </select>
                </div>
                <button type="button" class="btn btn-dark" onclick="window.location.href='/post_item'">게시물 작성</button>
            </div>
                <div class="row row-cols-1 row-cols-md-4 g-4" id="cards-box">
                </div>
            </div>
        </div>
    </div>

    <script src="../static/library/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="../static/js/get.js"></script>
    <script src="../static/js/post.js"></script>
</body>
</html>